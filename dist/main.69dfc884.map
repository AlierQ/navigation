{"version":3,"sources":["main.js"],"names":["start","end","hashMap","searchUrl","searchList","$","JSON","parse","window","localStorage","getItem","forEach","item","$newLi","url","title","$a","find","append","getTitleFavicon","on","e","location","href","val","target","name","each","index","removeClass","addClass","preventDefault","attr","parent","remove","splice","setItem","stringify","Date","clickTag","localName","undefined","textContent","prompt","checkStr","test","push","logo","src","document","key","click"],"mappings":"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","file":"main.69dfc884.map","sourceRoot":"..\\src","sourcesContent":["// 点击开始时间\r\nlet start = 0;\r\n// 点击结束时间\r\nlet end = 0;\r\n// 站点信息\r\nlet hashMap = [{\"logo\":\"//47.95.207.116:18002/api/v1/favicon?url=https://alierq.space/\",\"title\":\"我的个人博客\",\"url\":\"https://alierq.space/\"},{\"logo\":\"http://47.95.207.116:18002/api/v1/favicon?url=https://github.com/AlierQ\",\"title\":\"我的GitHub主页\",\"url\":\"https://github.com/AlierQ\"},{\"logo\":\"http://47.95.207.116:18002/api/v1/favicon?url=https://github.com/AlierQ/navigation\",\"title\":\"Github导航项目地址\",\"url\":\"https://github.com/AlierQ/navigation\"}];\r\n// 搜索前缀\r\nlet searchUrl = 'https://www.baidu.com/s?wd=';\r\n// 搜索引擎列表\r\nlet searchList = {\r\n    'baidu':'https://www.baidu.com/s?wd=',\r\n    'zhihu':'https://www.zhihu.com/search?type=content&q=',\r\n    'sougou':'https://www.sogou.com/web?query=',\r\n    'google':'https://www.baidu.com/s?wd=',\r\n    'bing':'https://cn.bing.com/search?q='\r\n};\r\n\r\n// 网页刚加载时\r\n$(function(){\r\n    // 当localstorage中有数据才读取\r\n    if(JSON.parse(window.localStorage.getItem('sites'))!==null){\r\n        hashMap = JSON.parse(window.localStorage.getItem('sites'))\r\n    }\r\n    // 遍历站点信息\r\n    hashMap.forEach((item)=>{\r\n        // console.log(item);\r\n        let $newLi = $(`\r\n        <li>\r\n            <div class=\"site\">\r\n                <a href=\"${item.url}\">\r\n                    <div class=\"logo\">\r\n                        <img src=\"#\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"detail\">\r\n                        <div class=\"site-title\">${item.title}</div>\r\n                        <div class=\"url\">${item.url}</div>\r\n                    </div>\r\n                    <div class=\"delete\">删除</div>\r\n                </a>\r\n            </div>\r\n        </li>\r\n        `)\r\n        // a标签\r\n        let $a = $newLi.find('.site > a');\r\n        // 添加站点元素\r\n        // $('.website>ul').prepend($newLi);  // 添加在最前面\r\n        $('.website>ul').append($newLi);  // 添加在最后面\r\n        getTitleFavicon($a[0]);\r\n    })\r\n})\r\n\r\n// 搜索按钮点击事件\r\n$('.search > button').on('click',function(e){\r\n    window.location.href = searchUrl +  $('.search > input').val()\r\n})\r\n\r\n// 选择搜索引擎\r\n$('.engine > a').on('click',function(e){\r\n    searchUrl =  searchList[e.target.name];\r\n    // 取消所有样式\r\n    $('.engine > a').each((index,item)=>{\r\n        $(item).removeClass('checked')\r\n    })\r\n    $(this).addClass('checked')\r\n})\r\n\r\n// 通过事件委托向子元素添加点击删除和点击跳转功能\r\n$('.website>ul').on('click',function(e){\r\n    // 先阻止ul的点击事件的行为\r\n    e.preventDefault();\r\n    // 点击的是删除按钮\r\n    if($(e.target).attr('class')==='delete'){\r\n        $(e.target).parent().parent().parent().remove();\r\n        let href = $(e.target).parent()[0].href;\r\n        hashMap.forEach((item,index)=>{\r\n            if(item.url === href){\r\n                hashMap.splice(index,1)\r\n            }\r\n        })\r\n        // 将站点信息转换成json放入localstorage\r\n        window.localStorage.setItem('sites',JSON.stringify(hashMap));\r\n\r\n    }else if(e.target === this){\r\n\r\n    }\r\n    else{ // 除了删除按钮之外的都视为点击\r\n        // console.log(e.target);\r\n        end = new Date();\r\n        // 鼠标按下和抬起小于300视为点击\r\n        if(end - start <=300){\r\n            let clickTag = $(e.target);\r\n            // 向上找a标签获取地址\r\n            while(clickTag[0].localName!=='a'){\r\n                clickTag = clickTag.parent();\r\n            }\r\n            window.location.href = clickTag[0].href\r\n        }\r\n    }\r\n})\r\n\r\n$('.website>ul').on('mousedown',function(e){\r\n    start = new Date();\r\n})\r\n\r\n$('.website>ul').on('mouseup',function(e){\r\n    // 先阻止ul的点击事件的行为\r\n    e.preventDefault();\r\n    end = new Date();\r\n\r\n    // 点击的不是删除按钮\r\n    if($(e.target).attr('class')!=='delete'){\r\n        // 鼠标按下和抬起时间差300m即为长按\r\n        if(end - start >= 300){\r\n            if($(e.target).parent().find('.site-title')[0]!==undefined){\r\n                $(e.target).parent().find('.site-title')[0].textContent = prompt('名称:');\r\n                hashMap.forEach((item)=>{\r\n                    if(item.url === $(e.target).parent().find('.url')[0].textContent){\r\n                        item.title = $(e.target).parent().find('.site-title')[0].textContent;\r\n                    }\r\n                })\r\n                // 将站点信息转换成json放入localstorage\r\n                window.localStorage.setItem('sites',JSON.stringify(hashMap));\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\n// 新增站点点击事件\r\n$('.add').on('click',()=>{\r\n    let url = prompt('请输入网址：');\r\n    let checkStr =/^https:\\/\\//g;\r\n    if(url===null||url===undefined||url===''){\r\n        return;\r\n    }else{\r\n        if(!checkStr.test(url)){\r\n            url = 'https://' + url;\r\n        }\r\n        let $newLi = $(`\r\n        <li>\r\n            <div class=\"site\">\r\n                <a href=\"${url}\">\r\n                    <div class=\"logo\">\r\n                        <img src=\"#\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"detail\">\r\n                        <div class=\"site-title\">╮(╯▽╰)╭  长按命名</div>\r\n                        <div class=\"url\">${url}</div>\r\n                    </div>\r\n                    <div class=\"delete\">删除</div>\r\n                </a>\r\n            </div>\r\n        </li>\r\n        `)\r\n        // a标签\r\n        let $a = $newLi.find('.site > a');\r\n        // 添加站点元素\r\n        // $('.website>ul').prepend($newLi);  // 添加在最前面\r\n        $('.website>ul').append($newLi);  // 添加在最后面\r\n        // 动态加载网站名称和图标\r\n        getTitleFavicon($a[0]);\r\n        // 放入到站点集合中\r\n        hashMap.push({\r\n            logo:'//47.95.207.116:18002/api/v1/favicon?url=' + url,\r\n            title:$newLi.find('.site-title')[0].textContent,\r\n            url:url\r\n        })\r\n        // 将站点信息转换成json放入localstorage\r\n        window.localStorage.setItem('sites',JSON.stringify(hashMap));\r\n        \r\n    }\r\n})\r\n\r\n// 移动端事件\r\n// $('.website>ul').on('longTap',function(e){\r\n//     alert('长按了')\r\n// })\r\n\r\n// $('.website>ul>li').on('touchend',function(e){\r\n//     console.log(e);\r\n// })\r\n\r\n// 调用api自动获取网页图标\r\nfunction getTitleFavicon(item){\r\n    // 动态加载favicon\r\n    $(item).find('.logo img')[0].src = '//47.95.207.116:18002/api/v1/favicon?url=' + item.href;\r\n}\r\n\r\n// 关闭页面存储hashMap\r\n// window.onbeforeunload = ()=>{\r\n//     window.localStorage.setItem('sites',JSON.stringify(hashMap));\r\n// }\r\n\r\n\r\n// 键盘事件 回车直接搜索\r\n$(document).on('keypress',(e)=>{\r\n    if(e.key === 'Enter'){\r\n        $('.search > button').click()\r\n    }\r\n})"]}